<!DOCTYPE html>
<html lang="pt">
<head>
    <link href="https://fonts.googleapis.com/css?family=Mulish&display=swap" rel="stylesheet" />
    <link href="../styles/registro.css" rel="stylesheet" />
    <link href="../styles/login.css" rel="stylesheet" />
    <title>Login</title>
</head>
<body>
    <header>
        <img src="../assets/logo2.png" class="logo">
    </header>
    <div clas="container">
        <h2 class="titulo_registro">Login</h2>
        <form>
            <div class="quadro">
                <input class="campo" type="text" placeholder="Endereço de e-mail" name="email" id="email"/>
                <hr class ="linha1">
                <input class="campo" type="password" placeholder="Senha" name="senha" id="senha"/>
                <hr class ="linha2">
                <a class="esqueci" href="/index.html">Esqueci minha senha</a>
            </div>
            <a onclick="Verify()"><input class="botao_login" type="button" value="LOGIN"></a>
        </form>
        <div class="criarConta">
            <p class="criar">Não possui uma conta?</p>
            <a class="criarLink" href="registro.html">Crie uma.</a>
        </div>
    </div>
    
    <footer id="rod">
        <div class="rodape-tu">
            <a class="direitos" href="">Termos de Uso</a>
            <a class="politica" href="">Política de Privacidade</a><br>
        </div>
        <div class="linha3"></div>
        <a class="DWEB">DWEB Productions | NEXUS INC</a>
    </footer>
</body>
</html>

<script>
    function Verify(){
        var email = document.getElementById("email").value;
        var senha = document.getElementById("senha").value;
        if(email=="" || senha==""){
            alert("Nenhum campo pode estar vazio.");
            return;
        }
            
        fetch("Users.txt")
            .then((res) => res.text())
            .then((text) => {
                var lines = text.split('\n');
                for (var line = 0; line < lines.length; line++) {
                    const matches = lines[line].split('"');
                    if(matches[1]==email){
                        if(matches[3]==senha){
                            window.location.href = "home.html";
                            return;
                        }
                        else{
                            alert("Teste");
                            break;
                        }
                    }
                }
                alert("E-mail ou senha inválido.");
            })
            .catch((e) => console.error(e));
    }
</script>